{% extends 'accounts/base.html' %}

{% block content %}
<!-- âœ… Navigation Bar -->
<div style="display: flex; justify-content: space-between; align-items: center; padding: 10px 30px; background-color: #fff0f6; box-shadow: 0 2px 5px rgba(0,0,0,0.1);">
    <div style="font-size: 20px; font-weight: bold;">ğŸ“š StudyBuddy</div>
    <div style="display: flex; gap: 20px;">
        <a href="/" style="text-decoration: none; color: #333;">Home</a>
        <a href="/dashboard" style="text-decoration: none; color: #333;">Dashboard</a>
        <a href="/settings" style="text-decoration: none; color: #333;">Settings</a>
        <a href="/logout" style="text-decoration: none; color: #e60073;">Logout</a>
    </div>
</div>

<!-- âœ… Flash Messages -->
{% if messages %}
    {% for message in messages %}
        <div class="alert alert-success" role="alert" style="background-color: #d4edda; color: #155724; border-radius: 5px; padding: 10px; margin-bottom: 20px;">
            {{ message }}
        </div>
    {% endfor %}
{% endif %}

<!-- âœ… Study Plan Overview -->
<div class="container text-center my-5 text-dark">
    <h2 style="color: deeppink;">Your Personalized Study Plan âœ¨</h2>
    <p><strong>Goal:</strong> {{ goal }}</p>
    <p><strong>Preferred Time:</strong> {{ preferred_time }}</p>
</div>

<!-- âœ… Subject Cards with Progress -->
<div style="display: flex; flex-wrap: wrap; gap: 20px; justify-content: center;">
    {% for subject, time in study_plan.items %}
        <div style="background-color: #ffe6f0; padding: 20px; border-radius: 15px; width: 250px; box-shadow: 0 4px 6px rgba(0,0,0,0.1);">
            <h3 style="margin: 0 0 10px;">ğŸ“˜ {{ subject|title }}</h3>
            <p>{{ time }}</p>
            {% with percent=60 %} <!-- You can change this later -->
            <div style="background-color: #f3f3f3; border-radius: 10px; overflow: hidden; height: 10px;">
                <div style="width: {{ percent }}%; background-color: #ff66b2; height: 10px;"></div>
            </div>
            <small>{{ percent }}% completed</small>
            {% endwith %}
        </div>
    {% endfor %}
</div>

<!-- âœ… Buttons -->
<div style="text-align: center; margin-top: 40px;">
    <form method="post" action="{% url 'generate_plan' %}">
        {% csrf_token %}
        <button type="submit" style="background-color: #ff4da6; color: white; padding: 10px 20px; border: none; border-radius: 10px; cursor: pointer;">ğŸ”„ Regenerate Plan</button>
    </form>

    <a href="{% url 'edit_preferences' %}" style="display: inline-block; margin-top: 15px; background-color: #ffb3d9; padding: 10px 15px; border-radius: 10px; color: black; text-decoration: none;">âœï¸ Edit Preferences</a>
</div>

<!-- âœ… Completion Message -->
{% if completed %}
    <div style="margin: 40px auto; max-width: 600px; background-color: #d1ffd6; color: #2d862d; padding: 20px; border-radius: 10px; font-weight: bold; text-align: center;">
        ğŸ‰ Congrats! You've completed your entire study routine! Keep up the amazing work! âœ¨
    </div>
{% endif %}
{% endblock %}
